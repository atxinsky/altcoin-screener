# Gmail邮箱提醒设置指南

## 方式一：使用Gmail（推荐）

### 步骤1：启用Google两步验证

1. 访问：https://myaccount.google.com/security
2. 找到"登录Google"部分
3. 点击"两步验证"
4. 按照提示完成设置（需要手机验证）

### 步骤2：生成应用专用密码

1. 两步验证启用后，访问：https://myaccount.google.com/apppasswords
   - 或者：Google账户 → 安全性 → 两步验证 → 应用专用密码
2. 在"选择应用"下拉菜单中选择"邮件"
3. 在"选择设备"下拉菜单中选择"其他（自定义名称）"
4. 输入名称：`币安筛选器`
5. 点击"生成"
6. **复制显示的16位密码**（格式：xxxx xxxx xxxx xxxx）

⚠️ 注意：这个密码只显示一次，请立即复制保存！

### 步骤3：配置.env文件

打开 `.env` 文件，修改以下内容：

```env
# Email Configuration
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=你的Gmail地址@gmail.com          # 例如：john@gmail.com
SMTP_PASSWORD=xxxx xxxx xxxx xxxx          # 上一步生成的16位密码（可以有空格）
EMAIL_TO=接收通知的邮箱@example.com         # 可以是任何邮箱，包括你自己的Gmail
```

**示例**：
```env
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=myemail@gmail.com
SMTP_PASSWORD=abcd efgh ijkl mnop
EMAIL_TO=myemail@gmail.com
```

---

## 方式二：使用QQ邮箱（国内用户备选）

### 步骤1：开启QQ邮箱SMTP服务

1. 登录QQ邮箱：https://mail.qq.com
2. 点击"设置" → "账户"
3. 找到"POP3/IMAP/SMTP/Exchange/CardDAV/CalDAV服务"
4. 开启"POP3/SMTP服务"或"IMAP/SMTP服务"
5. 按照提示发送短信验证
6. **保存显示的授权码**（16位）

### 步骤2：配置.env文件

```env
# Email Configuration
SMTP_HOST=smtp.qq.com
SMTP_PORT=587                              # 或使用 465（SSL）
SMTP_USER=你的QQ号@qq.com                  # 例如：123456789@qq.com
SMTP_PASSWORD=16位授权码                   # QQ邮箱的授权码
EMAIL_TO=接收通知的邮箱@example.com
```

---

## 方式三：使用163邮箱

### 步骤1：开启163邮箱SMTP服务

1. 登录163邮箱：https://mail.163.com
2. 点击"设置" → "POP3/SMTP/IMAP"
3. 开启"IMAP/SMTP服务"
4. 按照提示设置授权密码
5. **保存授权密码**

### 步骤2：配置.env文件

```env
# Email Configuration
SMTP_HOST=smtp.163.com
SMTP_PORT=465                              # 163邮箱使用SSL端口
SMTP_USER=你的163邮箱@163.com
SMTP_PASSWORD=授权密码
EMAIL_TO=接收通知的邮箱@example.com
```

---

## 测试邮件发送

配置完成后，可以通过以下方式测试：

1. 重启backend容器：
   ```bash
   docker-compose restart backend
   ```

2. 在筛选器中启用通知：
   - 访问 http://localhost:3080
   - 运行筛选时勾选"发送通知"
   - 或等待自动监控触发通知

---

## 常见问题

### Q1: Gmail提示"账号或密码错误"

**原因**：
- 没有启用两步验证
- 使用的是账户密码而不是应用专用密码
- 应用专用密码输入错误

**解决**：
- 确保已启用两步验证
- 重新生成应用专用密码
- 确认密码复制完整（包括空格无所谓）

### Q2: QQ邮箱/163邮箱无法发送

**原因**：
- 使用的是登录密码而不是授权码
- SMTP端口错误

**解决**：
- 使用授权码，不是登录密码
- QQ邮箱尝试端口：465 或 587
- 163邮箱使用端口：465

### Q3: 提示连接超时

**原因**：
- 防火墙阻止
- 网络问题

**解决**：
- 检查防火墙设置
- 尝试使用不同的SMTP端口

---

## 邮件通知内容

系统会在以下情况发送邮件：

1. **筛选结果通知**
   - 当发现高分机会时（默认70分以上）
   - 包含：币种、评分、涨幅、成交量等信息

2. **价格异动警报**
   - 检测到显著价格变化
   - 包含：币种、变化幅度、时间等

3. **定时监控报告**
   - 定期发送市场概况
   - 包含：BTC/ETH价格、top机会等

---

## 安全提示

⚠️ **重要安全建议**：

1. **不要泄露应用专用密码**
   - .env文件已在.gitignore中，不会提交到git
   - 不要在公共场合分享.env文件内容

2. **建议使用专门的邮箱**
   - 可以创建一个新的Gmail账户专门用于发送通知
   - 避免使用主要的个人邮箱

3. **定期更换密码**
   - 定期重新生成应用专用密码
   - 删除不再使用的应用专用密码

---

需要帮助？
- 查看后端日志：`docker logs tretra-backend`
- 测试SMTP连接：运行项目中的测试脚本
