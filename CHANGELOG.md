# 更新日志 (Changelog)

## v1.3.0 (2025-12-30)

### 新功能
- ✨ 新增通知设置面板
  - 邮件/Telegram 通知开关
  - 最小通知间隔控制（默认30分钟）
  - 每日通知上限（默认10次）
  - 静默时段设置（默认22:00-07:00北京时间）
  - 最低分数阈值过滤
  - 每次通知Top N机会设置
- ✨ 新增交易时间窗口限制
  - 北京时间 7:30-8:30, 11:30-12:30, 15:30-16:30
  - 只在指定时间窗口内执行自动模拟交易
- ✨ 回测分析支持按年度筛选交易数据
  - 年度选择器
  - 交易对列表动态过滤

### 修复
- 🔧 修复K线图表时区显示，统一使用北京时间（Asia/Shanghai）
- 🔧 修复筛选结果表格切换时间周期不更新问题
- 🔧 修复 screeningResults 状态传递问题

### 文档
- 📝 新增 .env.example 配置模板
- 📝 统一 Python 版本要求为 3.9+
- 📝 修复端口文档不一致问题

---

## v1.2.0 (2025-12-29) - Tretra Trading Station

### 重大更新
- 🎉 项目重命名为 **Tretra Trading Station**
- 🎉 新增交易回测分析功能

### 新功能
- ✨ 新增 Streamlit 交易回测分析模块
- ✨ 顶部导航栏，一键切换筛选器和回测分析
- ✨ 全屏回测界面，优化数据可视化体验
- 📊 支持 CSV 导入币安、OKX 历史交易数据
- 📊 智能订单聚合（60秒窗口，1%价格容差）
- 📊 多维度交易分析：胜率、盈亏比、最大回撤、夏普比率
- 📊 交易可视化：盈亏分布图、累计收益曲线、持仓时长分析
- 📊 分时段统计：按日期、按币种、按交易对分析表现
- 📊 Excel 导出功能
- 🗄️ 历史记录管理：启动时显示最近3次分析，一键加载

### 技术改进
- 🗄️ 新增数据库模型：ImportedTrade、BacktestAnalysis、ImportHistory
- 🐳 新增 Dockerfile.backtest，Docker 编排支持 4 个服务
- 🔧 回测服务与主程序共享环境变量配置
- 🔧 修复回测 CSV 文件保存路径，适配 Docker 环境

---

## v1.1.0 (2025-12-28)

### 新功能
- ✨ 新增 5分钟/15分钟/1小时 涨跌幅显示
- ✨ 新增数据新鲜度验证，自动跳过陈旧数据

### 修复
- 🔧 修复 BTC/ETH 比率计算，正确适配不同时间周期
  - 5m: 288根K线 = 24小时
  - 15m: 96根K线 = 24小时
  - 1h: 24根K线 = 24小时
  - 4h: 6根K线 = 24小时
- 🔧 修复 K线图指标重复创建问题

### 优化
- ⚡ 优化活跃市场过滤，自动排除已下架币种
- 🎨 优化历史排名显示，只显示当前活跃币种
- 📝 完善 API 响应字段，补充缺失的涨跌幅数据

---

## v1.0.0 (2025-12-27)

### 首次发布

#### 核心功能
- ✅ 币安现货山寨币数据采集
- ✅ BTC/ETH 价格比率分析（Beta筛选）
- ✅ 多时间周期支持 (5m, 15m, 1h, 4h)
- ✅ 成交量筛选（默认100万美元）
- ✅ 技术指标分析 (SMA, EMA, MACD, RSI, 布林带)
- ✅ 价格异动检测
- ✅ 专业 K线图表 (klinecharts v9.8.5)
- ✅ SQLite 数据库存储
- ✅ RESTful API (FastAPI)
- ✅ React Web 界面 (Ant Design)
- ✅ 邮件通知 (SMTP)
- ✅ Telegram 通知
- ✅ 实时监控服务
- ✅ Docker 部署支持

#### 评分系统
- Beta 分数 (30%): 相对 BTC/ETH 强度
- 成交量分数 (20%): 流动性评估
- 技术分数 (50%): 综合技术指标

#### 技术栈
- **后端**: Python 3.9+, FastAPI, SQLAlchemy, CCXT
- **前端**: React 18, Ant Design, klinecharts
- **数据库**: SQLite
- **通知**: SMTP, python-telegram-bot
- **部署**: Docker, Docker Compose

---

## 版本说明

### 版本号规则
遵循语义化版本 (Semantic Versioning):
- **主版本号**: 不兼容的 API 修改
- **次版本号**: 向下兼容的功能性新增
- **修订号**: 向下兼容的问题修正

### 服务端口
- **前端界面**: http://localhost:3000
- **后端 API**: http://localhost:8001
- **回测服务**: http://localhost:8501 (嵌入前端)
